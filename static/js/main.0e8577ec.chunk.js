(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{237:function(t,e,n){},238:function(t,e,n){"use strict";n.r(e);var r=n(0),a=n(32),c=n.n(a),i=n(10),s=n(7),o=n(108),u=n(8),l=n(12),d=n(13),p=n(15),j=n(14),m=n(22),h=n(9),b=n(23),O=n.n(b),f=n(37),v=n(109),x=n.n(v).a.create({baseURL:"https://streams-db-mb13534.herokuapp.com/"}),g=n(17),y=Object(g.a)(),S="SIGN_IN",I="SIGN_OUT",N="CREATE_STREAM",k="FETCH_STREAMS",w="FETCH_STREAM",C="EDIT_STREAM",E="DELETE_STREAM",A=function(t){return function(){var e=Object(f.a)(O.a.mark((function e(n){var r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.get("/streams2-client/".concat(t));case 2:r=e.sent,n({type:w,payload:r.data});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},D=n(1),T=function(t){Object(p.a)(n,t);var e=Object(j.a)(n);function n(){var t;Object(l.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(t=e.call.apply(e,[this].concat(a))).renderAdminButtons=function(e){if(e.userId===t.props.currentUserId)return Object(D.jsxs)("div",{className:"right floated content",children:[Object(D.jsx)(m.a,{to:"/streams2-client/edit/".concat(e.id),className:"ui button primary",children:"Edit"}),Object(D.jsx)(m.a,{to:"/streams2-client/delete/".concat(e.id),className:"ui button negative",children:"Delete"})]})},t.renderCreateButton=function(){if(t.props.isSignedIn)return Object(D.jsx)("div",{style:{textAlign:"right"},children:Object(D.jsx)(m.a,{to:"/streams2-client/new",className:"ui button black",children:"Create New Stream"})})},t.renderList=function(){return t.props.streams.map((function(e){return Object(D.jsxs)("div",{className:"item",children:[t.renderAdminButtons(e),Object(D.jsx)("i",{className:"large middle aligned icon camera"}),Object(D.jsxs)("div",{className:"content",children:[Object(D.jsx)(m.a,{className:"header",to:"streams2-client/".concat(e.id),children:e.title}),Object(D.jsx)("div",{className:"description",children:e.description})]})]},e.id)}))},t}return Object(d.a)(n,[{key:"componentDidMount",value:function(){this.props.fetchStreams()}},{key:"render",value:function(){return Object(D.jsxs)("div",{children:[Object(D.jsx)("h2",{children:"Streams"}),Object(D.jsx)("div",{className:"ui celled list",children:this.renderList()}),this.renderCreateButton()]})}}]),n}(r.Component),_=Object(i.b)((function(t){return{streams:Object.values(t.streams),currentUserId:t.auth.userId,isSignedIn:t.auth.isSignedIn}}),{fetchStreams:function(){return function(){var t=Object(f.a)(O.a.mark((function t(e){var n;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x.get("/streams2-client");case 2:n=t.sent,e({type:k,payload:n.data});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}})(T),M=n(240),B=n(239),R=function(t){Object(p.a)(n,t);var e=Object(j.a)(n);function n(){var t;Object(l.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(t=e.call.apply(e,[this].concat(a))).renderInput=function(e){var n=e.input,r=e.label,a=e.meta,c="field ".concat(a.error&&a.touched?"error":"");return Object(D.jsxs)("div",{className:c,children:[Object(D.jsx)("label",{children:r}),Object(D.jsx)("input",Object(h.a)(Object(h.a)({},n),{},{autoComplete:"off"})),t.renderError(a)]})},t.onSubmit=function(e){t.props.onSubmit(e)},t}return Object(d.a)(n,[{key:"renderError",value:function(t){var e=t.touched,n=t.error;if(e&&n)return Object(D.jsx)("div",{className:"ui error message",children:Object(D.jsx)("div",{className:"header",children:n})})}},{key:"render",value:function(){return Object(D.jsxs)("form",{className:"ui form error",onSubmit:this.props.handleSubmit(this.onSubmit),children:[Object(D.jsx)(M.a,{name:"title",component:this.renderInput,label:"Enter Title"}),Object(D.jsx)(M.a,{name:"description",component:this.renderInput,label:"Enter Description"}),Object(D.jsx)("button",{className:"ui button primary",children:"Submit"})]})}}]),n}(r.Component),L=Object(B.a)({form:"streamForm",validate:function(t){var e={};return t.title||(e.title="You must enter a title"),t.description||(e.description="You must enter a description"),e}})(R),U=function(t){Object(p.a)(n,t);var e=Object(j.a)(n);function n(){var t;Object(l.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(t=e.call.apply(e,[this].concat(a))).onSubmit=function(e){t.props.createStream(e)},t}return Object(d.a)(n,[{key:"render",value:function(){return Object(D.jsxs)("div",{children:[Object(D.jsx)("h3",{children:"Create a New Stream"}),Object(D.jsx)(L,{onSubmit:this.onSubmit})]})}}]),n}(r.Component),F=Object(i.b)(null,{createStream:function(t){return function(){var e=Object(f.a)(O.a.mark((function e(n,r){var a,c;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r().auth.userId,e.next=3,x.post("/streams2-client",Object(h.a)(Object(h.a)({},t),{},{userId:a}));case 3:c=e.sent,n({type:N,payload:c.data}),y.push("/streams2-client");case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}})(U),G=function(t){Object(p.a)(n,t);var e=Object(j.a)(n);function n(){var t;Object(l.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(t=e.call.apply(e,[this].concat(a))).onSubmit=function(e){t.props.editStream(t.props.match.params.id,e)},t}return Object(d.a)(n,[{key:"componentDidMount",value:function(){this.props.fetchStream(this.props.match.params.id)}},{key:"render",value:function(){return this.props.stream?Object(D.jsxs)("div",{children:[Object(D.jsx)("h3",{children:"Edit a Stream"}),Object(D.jsx)(L,{onSubmit:this.onSubmit,initialValues:{title:this.props.stream.title,description:this.props.stream.description}})]}):Object(D.jsx)("div",{children:"Loading..."})}}]),n}(r.Component),P=Object(i.b)((function(t,e){return{stream:t.streams[e.match.params.id]}}),{fetchStream:A,editStream:function(t,e){return function(){var n=Object(f.a)(O.a.mark((function n(r){var a;return O.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,x.patch("/streams2-client/".concat(t),Object(h.a)({},e));case 2:a=n.sent,r({type:C,payload:a.data}),y.push("/streams2-client");case 5:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}()}})(G),H=function(t){var e=t.title,n=t.content,r=t.actions,a=t.onDismiss;return c.a.createPortal(Object(D.jsx)("div",{onClick:a,className:"ui dimmer modals visible active",children:Object(D.jsxs)("div",{onClick:function(t){return t.stopPropagation()},className:"ui standard modal visible active",children:[Object(D.jsx)("div",{className:"header",children:e}),Object(D.jsx)("div",{className:"content",children:n}),Object(D.jsx)("div",{className:"actions",children:r})]})}),document.getElementById("modal"))},J=function(t){Object(p.a)(n,t);var e=Object(j.a)(n);function n(){return Object(l.a)(this,n),e.apply(this,arguments)}return Object(d.a)(n,[{key:"componentDidMount",value:function(){this.props.fetchStream(this.props.match.params.id)}},{key:"renderActions",value:function(){var t=this;return Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)("button",{onClick:function(){return t.props.deleteStream(t.props.stream.id)},className:"ui button negative",children:"Delete"}),Object(D.jsx)(m.a,{to:"/streams2-client",className:"ui button",children:"Cancel"})]})}},{key:"renderContent",value:function(){return this.props.stream?"Are you sure you want to delete the stream with title: ".concat(this.props.stream.title):"Are you sure you want to delete the stream with title:"}},{key:"render",value:function(){return Object(D.jsx)(H,{title:"Delete Stream",content:this.renderContent(),actions:this.renderActions(),onDismiss:function(){return y.push("/streams2-client")}})}}]),n}(r.Component),V=Object(i.b)((function(t,e){return{stream:t.streams[e.match.params.id]}}),{fetchStream:A,deleteStream:function(t){return function(){var e=Object(f.a)(O.a.mark((function e(n){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.delete("/streams2-client/".concat(t));case 2:n({type:E,payload:t}),y.push("/streams2-client");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}})(J),X=function(t){Object(p.a)(n,t);var e=Object(j.a)(n);function n(){return Object(l.a)(this,n),e.apply(this,arguments)}return Object(d.a)(n,[{key:"componentDidMount",value:function(){this.props.fetchStream(this.props.match.params.id)}},{key:"render",value:function(){if(!this.props.stream)return Object(D.jsx)("div",{children:"Loading..."});var t=this.props.stream,e=t.title,n=t.description;return Object(D.jsxs)("div",{children:[Object(D.jsx)("h1",{children:e}),Object(D.jsx)("h5",{children:n})]})}}]),n}(r.Component),Y=Object(i.b)((function(t,e){return{stream:t.streams[e.match.params.id]}}),{fetchStream:A})(X),K=(n(237),function(t){Object(p.a)(n,t);var e=Object(j.a)(n);function n(){var t;Object(l.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(t=e.call.apply(e,[this].concat(a))).onAuthChange=function(e){var n=t.auth.currentUser.get().getId();e?t.props.signIn(n):t.props.signOut()},t.onSignOutClick=function(){t.auth.signOut()},t.onSignInClick=function(){t.auth.signIn()},t}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var t=this;window.gapi.load("client:auth2",(function(){window.gapi.client.init({clientId:"994753246441-hgdpnslj1plukeb8gu5b3gm3c18orgvi.apps.googleusercontent.com",scope:"email"}).then((function(){t.auth=window.gapi.auth2.getAuthInstance(),t.onAuthChange(t.auth.isSignedIn.get()),t.auth.isSignedIn.listen(t.onAuthChange)}))}))}},{key:"renderAuthButton",value:function(){return null===this.props.isSignedIn?null:this.props.isSignedIn?Object(D.jsxs)("button",{onClick:this.onSignOutClick,className:"ui red google button",children:[Object(D.jsx)("i",{className:"google icon"}),"Sign Out"]}):!1===this.props.isSignedIn?Object(D.jsxs)("button",{onClick:this.onSignInClick,className:"ui red google button",children:[Object(D.jsx)("i",{className:"google icon"}),"Sign In With Google"]}):void 0}},{key:"render",value:function(){return Object(D.jsx)("div",{children:this.renderAuthButton()})}}]),n}(r.Component)),W=Object(i.b)((function(t){return{isSignedIn:t.auth.isSignedIn}}),{signIn:function(t){return{type:S,payload:t}},signOut:function(){return{type:I}}})(K),q=function(){return Object(D.jsxs)("div",{className:"ui secondary pointing menu",children:[Object(D.jsx)(m.a,{to:"/streams2-client",className:"item",children:"StreamSling"}),Object(D.jsxs)("div",{className:"right menu",children:[Object(D.jsx)(m.a,{to:"/streams2-client",className:"item",children:"All Streams"}),Object(D.jsx)(W,{})]})]})},z=function(){return Object(D.jsx)("div",{className:"ui container",children:Object(D.jsx)(u.b,{history:y,children:Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)(q,{}),Object(D.jsxs)(u.c,{children:[Object(D.jsx)(u.a,{path:"/streams2-client/",exact:!0,component:_}),Object(D.jsx)(u.a,{path:"/streams2-client/new",exact:!0,component:F}),Object(D.jsx)(u.a,{path:"/streams2-client/edit/:id",exact:!0,component:P}),Object(D.jsx)(u.a,{path:"/streams2-client/delete/:id",exact:!0,component:V}),Object(D.jsx)(u.a,{path:"/streams2-client/:id",exact:!0,component:Y})]})]})})})},Q=n(241),Z={isSignedIn:null,userId:null},$=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case S:return Object(h.a)(Object(h.a)({},t),{},{isSignedIn:!0,userId:e.payload});case I:return Object(h.a)(Object(h.a)({},t),{},{isSignedIn:!1,userId:null});default:return t}},tt=n(36),et=n(77),nt=n.n(et),rt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;switch(e.type){case w:return Object(h.a)(Object(h.a)({},t),{},Object(tt.a)({},e.payload.id,e.payload));case k:return Object(h.a)(Object(h.a)({},t),nt.a.mapKeys(e.payload,"id"));case N:case C:return Object(h.a)(Object(h.a)({},t),{},Object(tt.a)({},e.payload.id,e.payload));case E:return nt.a.omit(t,e.payload);default:return t}},at=Object(s.c)({auth:$,streams:rt,form:Q.a}),ct=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||s.d,it=Object(s.e)(at,ct(Object(s.a)(o.a)));c.a.render(Object(D.jsx)(i.a,{store:it,children:Object(D.jsx)(z,{})}),document.getElementById("root"))}},[[238,1,2]]]);
//# sourceMappingURL=main.0e8577ec.chunk.js.map